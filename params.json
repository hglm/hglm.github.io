{"name":"Hglm.github.io","tagline":"hglm's blog","body":"# Optimizing system performance of flash-based Linux systems\r\n\r\nHere are a few tips to improve interactive performance on flash (SD-card)-based devices running\r\nLinux, such as the Raspberry Pi, other ARM boards and tablets. These apply primarily to Debian and derived distros such as Raspbian, probably Ubuntu, and in general terms to most Linux distributions. \r\n\r\nWhen the root filesystem used on the device is a flash memory card or flash memory as will often be the case,  the performance bottleneck will often be write access to the root file system. It is therefore beneficial for overall system performance to reduce unnecessary writing by using methods such as ramdisk file systems, tmpfs, and reducing system logging activity.\r\n\r\n### Reducing system logging activity\r\n\r\nIn a default distro install, system logging is often configured fully, suitable for a server or multi-user system.  However, on a single-user system the constant writing the many system log files will result in reduced interactive system performance, and reducing logging activity will be beneficial for performance as well as the lifetime of the flash memory.\r\n\r\nIn a Debian Wheezy installation, the default system logger is rsyslog, and it configuration file is /etc/rsyslog.conf. In the rules section, the following logs are often enabled by default:\r\n```\r\n auth,authpriv.*                 /var/log/auth.log\r\n *.*;auth,authpriv.none         -/var/log/syslog\r\n cron.*                         /var/log/cron.log\r\n daemon.*                       -/var/log/daemon.log\r\n kern.*                         -/var/log/kern.log\r\n lpr.*                          -/var/log/lpr.log\r\n mail.*                         -/var/log/mail.log\r\n user.*                         -/var/log/user.log\r\n```\r\nThere may also be rules for -/var/log/debug and -/var/log/messages, and |/dev/xconsole.\r\n\r\nNote that kernel messages are logged in both kern.log and syslog, in addition to being available from the dmesg command from kernel memory. In a single user system, it is possible to disable most or all of these logs by placing a '#' character at the start of the corresponding lines. Logs can be re-enabled if it is necessary to debug a system problem.\r\n\r\n### Optimizing cache directories\r\n\r\nApplications like browsers and window managers that use a disk cache may conform to the XDG Base Directory Specification standard. In that case, the environment variable XDG_CACHE_HOME defines the directory where cache files are stored. By setting this variable to a ramdisk location, it is possible to greatly speed-up the performance of certain browsers that otherwise stall with heavy writing to the disk-cache in flash memory. For example, in a Debian Wheezy installation with LXDE, there may be a configuration file called /etc/alternatives/x-session-manager. By adding the line\r\n```\r\n export XDG_CACHE_HOME=\"/dev/shm/.cache\"\r\n```\r\nto the start of this file, programs running in X conforming to the standard will be using the ramdisk in /dev/shm to store cache files. One browser popular on light-weight configurations that benefits form this is Midori. The default disk cache size in Midori is 100MB, you can lower this if you don't have much system memory available, but you can configure Midori to clean the cache on exit and thus give back the memory to the system in Tools->Clear Private Data.\r\n\r\n### Using tmpfs\r\n\r\nTo mount /tmp and /var/tmp (the directories for temporary files used by programs) on a ramdisk, you may be able to add the following lines to /etc/fstab:\r\n```\r\n tmpfs    /tmp        tmpfs    defaults    0 0\r\n tmpfs    /var/tmp    tmpfs    defaults    0 0\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}